{
    "form": [
        [
            {
                "type": "text",
                "label": "Fun\u00E7\u00E3o",
                "fill": "100"
            }
        ],
        [
            {
                "type": "text",
                "label": "Rua",
                "fill": "25"
            },
            {
                "type": "text",
                "label": "Bairro",
                "fill": "20"
            },
            {
                "type": "text",
                "label": "Cidade",
                "fill": "20"
            },
            {
                "type": "text",
                "label": "Estado",
                "fill": "15"
            },
            {
                "type": "text",
                "label": "Pa\u00EDs",
                "fill": "20"
            }
        ],
        [
            {
                "type": "text",
                "label": "Complemento",
                "fill": "50"
            },
            {
                "type": "text",
                "label": "CEP",
                "fill": "50",
                "script": [
                    "change = dom => {",
                        "let cep = dom['CEP'].value;",
                        "cep = cep.match(/\\d+/g);",
                        "if (cep && cep.join('').length === 8) {",
                            "const http = require('http');",
                            "let data = '';",
                            "cep = cep.join('');",
                            "http.get('http://viacep.com.br/ws/' + cep + '/json/', resp => {",
                                "resp.on('data', chunk => {",
                                    "data += chunk;",
                                "});",
                                "resp.on('end', () => {",
                                    "data = JSON.parse(data);",
                                    "const { logradouro, complemento, bairro, localidade, uf } = data;",
                                    "dom['Rua'].value = logradouro || dom['Rua'].value;",
                                    "dom['Complemento'].value = complemento || dom['Complemento'].value;",
                                    "dom['Bairro'].value = bairro || dom['Bairro'].value;",
                                    "dom['Cidade'].value = localidade || dom['Cidade'].value;",
                                    "dom['Estado'].value = uf || dom['Estado'].value;",
                                    "Object.values(dom).forEach(input => refreshState(input));",
                                "});",
                            "});",
                        "} else {",
                            "refreshState(dom['CEP']);",
                        "}",
                    "};"
                ]
            }
        ],
        [
            {
                "type": "textarea",
                "label": "Descri\u00E7\u00E3o",
                "rows": "5",
                "cols": "20"
            }
        ],
        [
            {
                "type": "submit",
                "value": "SALVAR",
                "checkSuite": {
                    "Fun\u00E7\u00E3o": "^[\\w|\\s]{1,150}$",
                    "Rua": "^[\\w|\\s]{1,150}$",
                    "Cidade": "^[\\w|\\s]{1,150}$",
                    "Estado": "^[a-zA-Z]{2}$",
                    "Pa\u00EDs": "^[\\w|\\s]{1,50}$",
                    "CEP": "^\\d{5}-\\d{3}|\\d{8}$"
                }
            }
        ]
    ]
}
